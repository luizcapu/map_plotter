{% extends "layout.html" %}
{% block body %}
<h2>Plotter {{ city_id }}</h2>

<div id="map" style="height: 800px; width: 100%;"></div>
<script>

    var map;
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 13,
            center: {lat: -23.572698, lng: -46.662621}
        });

        // Load GeoJSON.
        //map.data.loadGeoJson('https://storage.googleapis.com/maps-devrel/google.json');
        map.data.loadGeoJson("{{ url_for('static', filename='map_json/{{ city_id }}.json') }}");

        // [START snippet]
        // Color each letter gray. Change the color when the isColorful property
        // is set to true.
        map.data.setStyle(function (feature) {
            var color = 'gray';
            if (feature.getProperty('color')) {
                color = feature.getProperty('color');
            }
            return /** @type {google.maps.Data.StyleOptions} */({
                fillColor: color,
                strokeColor: color,
                strokeWeight: 2
            });
        });
    }

</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAUuiqKxYF6OPRAWf0hwt52GYX3SpBWlO4&signed_in=false&callback=initMap"></script>
{% endblock %}